<div class="p-4 pt-0 min-[1700px]:mx-[300px]">
  <ng-title title="Checkout" size="5xlarge" [full]="true" [border]="true"></ng-title>

  <div class="flex items-start gap-4 mt-4">
    <div class="flex-1 rounded-lg overflow-hidden bg-white">
      @if (cart()) {
        <app-checkout-steps [cart]="cart()!"></app-checkout-steps>
      }
      @else {
        <div class="flex justify-center items-center h-full">
          <div class="text-gray-500">No cart found</div>
        </div>
      }
    </div>

    <div class="rounded-lg overflow-hidden bg-white">
      <div class="bg-black text-white p-4 text-2xl">Cart Details</div>
      <div class="w-full">
        <div class="grid grid-cols-[1fr_150px_150px] border-b-2 border-x-0 border-t-0 border-y-0 border-dashed border-gray-300">
          <div class="text-xl p-4 text-gray-600 uppercase">Product</div>
          <div class="text-xl p-4 text-gray-600 text-center">Quantity</div>
          <div class="text-xl p-4 text-gray-600 uppercase text-right">Subtotal</div>
        </div>

        <div class="border-b-2 border-x-0 border-t-0 border-y-0 border-dashed border-gray-300">
          @for (product of cart()?.products; track product.id) {
            <div class="grid grid-cols-[1fr_150px_150px] items-center pt-4 last:pb-4">
              <div class="text-gray-600 px-4">{{ product.name }}</div>
              <div class="text-center text-gray-400 font-mono px-4">{{ product.quantity }}</div>
              <div class="text-right text-gray-600 px-4">{{ product.price | currency }}</div>
            </div>
          }
        </div>

        <div class="grid grid-cols-3 p-4 border-b-2 border-x-0 border-t-0 border-y-0 border-dashed border-gray-300">
          <div class="text-gray-500 uppercase">Subtotal</div>
          <div></div>
          <div class="text-right text-gray-600">{{ cart()?.total | currency }}</div>
        </div>

        <div class="grid grid-cols-3 p-4 border-b-2 border-x-0 border-t-0 border-y-0 border-dashed border-gray-300">
          <div class="text-gray-500 uppercase">Shipping</div>
          <div></div>
          <div class="text-right text-gray-600">{{ cart()?.shipping | currency }}</div>
        </div>

        <div class="grid grid-cols-3 p-4 border-b-2 border-x-0 border-t-0 border-y-0 border-dashed border-gray-300">
          <div class="text-red-500 uppercase">Discount</div>
          <div></div>
          <div class="text-right text-red-500">{{ cart()?.discount | currency }}</div>
        </div>

        <div class="grid grid-cols-3 p-4">
          <div class="font-semibold text-gray-700 uppercase text-xl">Total with discount</div>
          <div></div>
          <div class="text-right font-bold text-gray-700 text-xl">{{ ((cart()?.total ?? 0) - (cart()?.discount ?? 0)) + (cart()?.shipping ?? 0) | currency }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
